<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listado</title>
  <style>
    body {
      font-family: monospace;
      background-color: #d1cece;
      display: flex;
      justify-content: space-between;
      padding: 20px;
    }

    .console {
      background-color: rgb(201, 201, 201);
      border: 1px solid #aaa;
      width: 45%;
      height: 600px;
      overflow: auto;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .item {
      padding: 8px;
      margin: 6px 0;
      background-color: #f0f0f0;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
      user-select: none;
    }

    .drop-zone {
      background-color:rgb(201, 201, 201);
      border: 2px dashed #ccc;
      height: 300px;
      width: 45%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      overflow: auto;
    }

    .drop-zone.drag-over {
      background-color: #e0f7fa;
    }

    .header {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
    }

    select {
      padding: 2px 5px;
      font-family: monospace;
    }

    .group-title {
      font-weight: bold;
      margin-top: 10px;
    }

    .group {
      margin-top: 10px;
      display: none; /* Ocultar las agrupaciones por defecto */
    }

    /* Estilo para el menú desplegable */
    details {
      margin-top: 10px;
    }

    summary {
      font-weight: bold;
      cursor: pointer;
    }

    .subitem {
      margin-left: 20px;
      cursor: pointer;
      padding: 5px;
      background-color: #e7e7e7;
      border-radius: 4px;
    }

    .subitem:hover {
      background-color: #c8c8c8;
    }

  </style>
</head>
<body>

  <!-- Zona izquierda (Lista de ítems seleccionables) -->
  <div class="console">
    <div class="header">
      <select id="group-select" onchange="filterGroups()">
        <option value="">Seleccionar agrupación</option>
        <option value="group-1">Semanal</option>
        <option value="group-2">Mensual</option>
        <option value="group-3">Favoritos</option>
      </select>
    </div>

    <div id="list-left">
      <!-- Menú desplegable de ítems -->
      <details>
        <summary>Ventas 🪪</summary>
        <div class="subitem" id="item-1" draggable="true" data-item="Ventas 🪪">Ventas 🪪</div>
        <div class="subitem" id="item-2" draggable="true" data-item="Comprobantes">Comprobantes</div>
        <div class="subitem" id="item-3" draggable="true" data-item="Consolidado por Camión">Consolidado por Camión</div>
        <div class="subitem" id="item-4" draggable="true" data-item="Descargas">Descargas</div>
        <div class="subitem" id="item-5" draggable="true" data-item="Cobranzas">Cobranzas</div>
        <div class="subitem" id="item-6" draggable="true" data-item="IvaVentas">Iva Ventas</div>
        <div class="subitem" id="item-7" draggable="true" data-item="UtilComp">Utilidad por Comprobantes</div>
      </details>

      <details>
        <summary>Compras 🪪</summary>
        <div class="subitem" id="item-8" draggable="true" data-item="Compras 🪪">Compras 🪪</div>
        <div class="subitem" id="item-12" draggable="true" data-item="Comprobantes">Comprobantes</div>
        <div class="subitem" id="item13" draggable="true" data-item="Seguimientos">Seguimientos</div>
        <div class="subitem" id="item-14" draggable="true" data-item="Saldos">Saldos</div>
        <div class="subitem" id="item-15" draggable="true" data-item="Desglose">Desglose</div>
        <div class="subitem" id="item-16" draggable="true" data-item="Historia de Pagos">Historia de Pagos</div>
        <div class="subitem" id="item-17" draggable="true" data-item="Resumen de Cuenta Corriente">Resumen de Cuenta Corriente</div>
        <div class="subitem" id="item-18" draggable="true" data-item="Vencimientos a pagar">Vencimientos a pagar</div>
        <div class="subitem" id="item-19" draggable="true" data-item="Iva Compras">Iva Compras</div>
        <div class="subitem" id="item-20" draggable="true" data-item="Consolidado por Proveedor">Consolidado por Proveedor</div>

      </details>

      <details>
        <summary>Stock 🪪</summary>
        <div class="subitem" id="item-10" draggable="true" data-item="Stock 🪪">Stock 🪪</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Comprobantes">Comprobantes</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Comprobantes Detallados">Comprobantes Detallados</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Depositos">Depositos</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Producción">Producción</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Lote">Lote</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Movimientos">Movimientos</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Stock Comprometido">Stock Comprometido</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Stock">Stock</div>
        <div class="subitem" id="item-11" draggable="true" data-item="Stock Valorizado">Stock Valorizado</div>
      </details>
    </div>
  </div>

  <!-- Zona derecha (Agrupaciones fijas donde se agregan los elementos seleccionados) -->
  <div class="drop-zone" id="drop-right">
    <div id="group-1" class="group" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3 class="group-title">Semanal</h3>
      <div id="group-1-items"></div>
    </div>
    <div id="group-2" class="group" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3 class="group-title">Mensual</h3>
      <div id="group-2-items"></div>
    </div>
    <div id="group-3" class="group" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3 class="group-title">Anual</h3>
      <div id="group-3-items"></div>
    </div>
  </div>

  <script>
    // Función para permitir el "dragover" y habilitar el drop
    function allowDrop(ev) {
      ev.preventDefault();
    }

    // Función para manejar el "drop"
    function drop(ev) {
      ev.preventDefault();

      // Obtener el id del grupo de destino donde se soltó
      const groupId = ev.target.closest('.group').id;

      // Obtener el id del ítem que se está arrastrando
      const itemId = ev.dataTransfer.getData("text");

      // Obtener el ítem correspondiente
      const item = document.getElementById(itemId);
      if (item) {
        // Crear una nueva "copia" del ítem y agregarlo al grupo de destino
        const newItem = item.cloneNode(true); // Clonamos el elemento para no eliminar el original
        const groupItemsContainer = document.getElementById(`${groupId}-items`);
        groupItemsContainer.appendChild(newItem);
      }
    }

    // Añadir eventos de "dragstart" a los ítems
    const items = document.querySelectorAll('.subitem');
    items.forEach(item => {
      item.addEventListener("dragstart", (ev) => {
        // Guardar el id del elemento arrastrado en el objeto de transferencia de datos
        ev.dataTransfer.setData("text", ev.target.id);
      });
    });

    // Función para permitir el arrastre a los grupos
    const groups = document.querySelectorAll('.group');
    groups.forEach(group => {
      group.addEventListener('dragover', (ev) => {
        ev.preventDefault();  // Permite el "drop"
        group.classList.add('drag-over');
      });

      group.addEventListener('dragleave', () => {
        group.classList.remove('drag-over');
      });
    });

    // Filtrar los grupos según la selección en el select
    function filterGroups() {
      const selectedGroup = document.getElementById("group-select").value;
      
      // Ocultar todas las agrupaciones
      const allGroups = document.querySelectorAll('.group');
      allGroups.forEach(group => {
        group.style.display = "none";
      });

      // Mostrar solo el grupo seleccionado
      if (selectedGroup) {
        document.getElementById(selectedGroup).style.display = "block";
      }
    }
  </script>

</body>
</html>
